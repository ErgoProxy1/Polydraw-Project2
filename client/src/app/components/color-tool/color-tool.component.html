<div class="row form-inline">
  <small class="col-md-7 ">Primary</small>
  <div class="col-md-4 form-control form-control-sm clickable p-0 bg-white" (click)="colorPrimarySelected();openModal()"
    placement="top" ngbTooltip="Change">
    <div class="form-control form-control-sm full-size" [style.background-color]="rgbaPrimaryColor.asString()"></div>
  </div>
</div>
<div class="row form-inline mt-2">
  <small class="col-md-7 ">Opacity</small>
  <input class="col-md-4 form-control form-control-sm text-small" type="number" step="0.01" min="0" max="1"
    [(ngModel)]="primaryAlpha" (click)="validateAlpha()" (focusout)="validateAlpha()" (input)="validateAlpha()">
  <input type="range" class="custom-range col-md-10 offset-1" [(ngModel)]="primaryAlpha" (input)="validateAlpha()"
    min="0" max="1" step="0.01">
</div>
<div class="row mt-1">
  <button (click)="setBackgroundColor()" class="btn btn-secondary btn-sm col-md-5 offset-md-1 p-0 text-small"
    placement="top" ngbTooltip="Change Background Color">Background</button>
  <button (click)="switchColor()" class="btn btn-secondary btn-sm col-md-4 offset-md-1 p-0 text-small" placement="top"
    ngbTooltip="Invert Colors">↑↓</button>
</div>

<div class="row form-inline mt-3">
  <small class="col-md-7 ">Secondary</small>
  <div class="col-md-4 form-control form-control-sm clickable p-0 bg-white"
    (click)="colorSecondarySelected();openModal()" placement="top" ngbTooltip="Change">
    <div class="form-control form-control-sm full-size" [style.background-color]="rgbaSecondaryColor.asString()"></div>
  </div>
</div>
<div class="row form-inline mt-2">
  <small class="col-md-7 ">Opacity</small>
  <input class="col-md-4 form-control form-control-sm text-small" type="number" step="0.01" min="0" max="1"
    [(ngModel)]="secondaryAlpha" (click)="validateAlpha()" (focusout)="validateAlpha()" (input)="validateAlpha()">
  <input type="range" class="custom-range col-md-10 offset-1" [(ngModel)]="secondaryAlpha" (input)="validateAlpha()"
    min="0" max="1" step="0.01">
</div>

<div class="row form-inline mt-3">
  <small class="col-md-12 ">Previous Colors</small>

</div>


<div class="row p-1 mt-1 ">
  <div class="last-color">
    <div class="color-badge" *ngFor="let lastColor of lastColorsUsed" [style.background-color]="lastColor.rgbaTextForm"
      (click)="getStackColor($event,lastColor)" (contextmenu)="getStackColor($event,lastColor)">

    </div>
  </div>
</div>

<ng-template #paletteModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title">Color choices</h5>
  </div>
  <form [formGroup]="paletteForm" (ngSubmit)="applyClickedColor();closeModal();">
    <div class="modal-body">
      <div class="row">
        <div class="col-md-12">
          <label>Preview: </label>
          <svg width="30" height="30">
            <circle class="preview-color" cx="15" cy="15" r="10" [attr.fill]="currentHexSelectedColor"
              [attr.fill-opacity]="currentAlpha" />
          </svg>
        </div>
      </div>
      <div class="row">
        <div class="col-md-2">
          <label>Palette:</label>
        </div>
        <div class="col-md-10">
          <div class="palette">
            <div class="palette-badge" *ngFor="let choice of palettesChoicesRGB" [style.background-color]="choice.rgbaTextForm"
            (click) = "getClickedColor(choice)" ></div>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-md-12">
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text left-form-group">RGB</span>
            </div>
            <div class="form-inline">
              <input class="form-control center-form-group" name="red" formControlName="red" type="number" min="0"
                max="255" (input)="confirmRGBColor()" (click)="confirmRGBColor()" (focusin)="setActiveFocus()"
                (focusout)="confirmRGBColor(); setInactiveFocus()">
              <input class="form-control center-form-group " name="green" formControlName="green" type="number" min="0"
                max="255" (input)="confirmRGBColor()" (click)="confirmRGBColor()" (focusin)="setActiveFocus()"
                (focusout)="confirmRGBColor(); setInactiveFocus()">
              <input class="form-control center-form-group" name="blue" formControlName="blue" type="number" min="0"
                max="255" (input)="confirmRGBColor()" (click)="confirmRGBColor()" (focusin)="setActiveFocus()"
                (focusout)="confirmRGBColor(); setInactiveFocus()">
            </div>
          </div>
        </div>
      </div>



      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text left-form-group">HEX</span>
        </div>
        <input name="hex" formControlName="hex" class="form-control" type="text" (focusin)="setActiveFocus()"
          (input)="confirmHexColor();" (focusout)="confirmHexColor(); setInactiveFocus()" maxlength="6"
          aria-describedby="applyHex">
      </div>

      <div class="alert alert-danger" *ngIf="hexError || rgbaError">Invalid Data</div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline-dark" (click)="closeModal()">Cancel</button>
      <button class="btn btn-outline-success" [disabled]="hexError || rgbaError">Apply</button>
    </div>
  </form>
</ng-template>