<div class="text-center p-0" (click)="openModal()">
  <i class="far fa-plus-square clickable fa-2x align-middle"></i>
</div>

<ng-template #newDrawModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title">Nouveau Dessin</h5>
  </div>
  <form [formGroup]="drawingForm" (ngSubmit)="newDrawing(drawingForm); closeModal();">
    <div id="background" class="modal-body">
      <h6>Dimensions (50 à 5000)</h6>
      <div class="row mt-2">
        <div class="form-group col-md-6">
          <div class="form-group row">
            <label for="inputEmail3" class="col-md-5 col-form-label">Largeur: </label>
            <div class="col-md-7">
              <input id="inputWidth" name="width" type="number" min="0" id="width" formControlName="width"
                (click)="checkDimensionValues()" class="form-control" (focusin)="setActiveFocus()"
                (focusout)="checkDimensionValues(); setInactiveFocus()">
            </div>
          </div>
        </div>
        <div class="form-group col-md-6">
          <div class="form-group row">
            <label for="inputEmail3" class="col-md-5 col-form-label">Hauteur: </label>
            <div class="col-md-7">
              <input id="inputHeight" name="height" type="number" min="0" id="height" formControlName="height"
                (click)="checkDimensionValues()" class="form-control" (focusin)="setActiveFocus()"
                (focusout)="checkDimensionValues(); setInactiveFocus()">
            </div>
          </div>
        </div>
      </div>
      <h6>Couleur de Fond</h6>
      <div class="row">
        <div class="col-md-12">
          <label>Aperçu: </label>
          <svg width="30" height="30">
            <circle id="currentColor" cx="15" cy="15" r="10" [attr.fill]="currentColorHex"
              [attr.fill-opacity]="currentAlpha" />
          </svg>
        </div>
      </div>
      <div class="row">
        <div class="col-md-2">
          <label>Palette:</label>
        </div>
        <div class="col-md-10">

          <svg #palette id="paletteNc" width="300" height="200">
            <rect *ngFor="let choice of paletteChoices" [attr.x]="choice.positionX" [attr.y]="choice.positionY"
              width="50" height="50" [attr.fill]="choice.color" (click)="updateFromPalette($event)"></rect>
          </svg>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text left-form-group">RGBA</span>
            </div>
            <div class="form-inline">
              <input class="form-control center-form-group" name="red" formControlName="red" type="number" min="0"
                max="255" (click)="confirmRGBColor()" (input)="confirmRGBColor()" (focusin)="setActiveFocus()"
                (focusout)="confirmRGBColor(); setInactiveFocus()">
              <input class="form-control center-form-group " name="green" formControlName="green" type="number" min="0"
                max="255" (click)="confirmRGBColor()" (input)="confirmRGBColor()" (focusin)="setActiveFocus()"
                (focusout)="confirmRGBColor(); setInactiveFocus()">
              <input class="form-control center-form-group" name="blue" formControlName="blue" type="number" min="0"
                max="255" (click)="confirmRGBColor()" (input)="confirmRGBColor()" (focusin)="setActiveFocus()"
                (focusout)="confirmRGBColor(); setInactiveFocus()">
              <input class="form-control right-form-group" name="alpha" formControlName="alpha" type="number"
                step="0.01" min="0" max="1" (click)="confirmAlpha()" (input)="confirmAlpha()" (focusin)="setActiveFocus()"
                (focusout)="confirmAlpha(); setInactiveFocus()">
            </div>
          </div>
        </div>
      </div>

      <div class="input-group mb-3" id="hexGroupNc">
        <div class="input-group-prepend">
          <span class="input-group-text left-form-group">HEX</span>
        </div>
        <input name="hex" formControlName="hex" class="form-control" type="text" (keyup)="correctHexInput()"
          (focusin)="setActiveFocus()" (keydown)="correctHexInput()" (focusout)="confirmHexColor(); setInactiveFocus()"
          maxlength="6" aria-describedby="applyHex">
        <div class="input-group-append">
          <button type="button" id="applyHex" class="btn btn-outline-secondary"
            (click)="confirmHexColor()">Apply</button>
        </div>
      </div>
      <div *ngIf="errorInColors || errorsInDimensions" id="dataAlert" class="alert alert-danger" role="alert">
        Erreur dans vos données! Veuillez réviser vos valeurs.
      </div>
    </div>
    <div class="modal-footer">
      <button id="dismiss" type="button" class="btn btn-outline-dark" (click)="closeModal()">Annuler</button>
      <button type="submit" class="btn btn-outline-success" [disabled]="errorInColors || errorsInDimensions">Créer un
        nouveau
        dessin</button>
    </div>

  </form>
</ng-template>