import { HttpClientModule } from '@angular/common/http';
import { TestBed } from '@angular/core/testing';
import { MessageHandlerService } from '../messageHandler/message-handler.service';
import { DrawingCommunicationService } from '../serverCommunication/drawing-communication.service';
import { FillingPath } from '../svgPrimitives/path/fillPath/fillPath';
import { Color } from '../utils/color';
import { MouseEventType, PrimitiveType, StrokeType } from '../utils/constantsAndEnums';
import { Point } from '../utils/point';
import { PaintBucketTool } from './paintBucketTool';

// tslint:disable: no-string-literal
describe('PaintBucketTool', () => {
    let tool: PaintBucketTool;

    beforeEach(() => {
        TestBed.configureTestingModule({
            providers: [DrawingCommunicationService],
            imports: [HttpClientModule],
        }).compileComponents();
        tool = new PaintBucketTool(new Color(255, 0, 0), new Color(0, 255, 0),
            TestBed.get(DrawingCommunicationService), TestBed.get(MessageHandlerService));
    });

    // mouseEvent
    it('Should correctly do mouseEvent', () => {
        tool.mouseEvent(MouseEventType.MouseClickLeft, new Point(12, 12));
        expect(tool.cursorPosition).toEqual(new Point(12, 12));
        expect(tool['isClicked']).toBe(true);
        tool = new PaintBucketTool(new Color(255, 0, 0), new Color(0, 255, 0),
            TestBed.get(DrawingCommunicationService), TestBed.get(MessageHandlerService));
        tool.mouseEvent(MouseEventType.MouseClickRight, new Point(12, 12));
        expect(tool.cursorPosition).toEqual(new Point(12, 12));
        expect(tool['isClicked']).toBe(true);
        tool = new PaintBucketTool(new Color(255, 0, 0), new Color(0, 255, 0),
            TestBed.get(DrawingCommunicationService), TestBed.get(MessageHandlerService));
        tool.mouseEvent(MouseEventType.MouseMove, new Point(12, 12));
        expect(tool.cursorPosition).toEqual(new Point(0, 0));
        expect(tool['isClicked']).toBe(false);
    });

    // Get colors
    it('should return the right color', () => {
        const color1: Color = new Color(123, 123, 123);
        const color2: Color = new Color(234, 234, 234);
        tool = new PaintBucketTool(color1, color2,
            TestBed.get(DrawingCommunicationService), TestBed.get(MessageHandlerService));
        expect(tool.getColors()).toEqual(color1);
        expect(tool.getColors2()).toEqual(color2);

    });

    // create command
    it('Should create a comand', async () => {
        const primitive = new FillingPath(new Color(1, 1, 1), new Color(1, 1, 1), 3, PrimitiveType.Fill, StrokeType.Full);
        tool['primitive'] = primitive;
        tool['createCommand']();
        tool.subscribeToCommand().subscribe((data) => {
            expect(data).toBeTruthy();
        });
        expect(tool['command']).toBeTruthy();

    });

    // generateCanvas
    it('Should generate correctly the canvas add filling', async () => {
        const width = 200;
        const height = 400;
        const ctx = document.createElement('canvas');
        // tslint:disable-next-line: max-line-length
        tool.canvasData = 'data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIF9uZ2NvbnRlbnQtb3dpLWM1PSIiIGNsYXNzPSJzdmdDb250YWluZXIiIHZpZXdCb3g9IjAgMCAyMDAgNDAwIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyIgd2lkdGg9IjIwMCIgaGVpZ2h0PSI0MDAiPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3QtbmctaWYiOiAiZmFsc2UiCn0tLT48ZyBfbmdjb250ZW50LW93aS1jNT0iIiBhcHAtc3ZnPSIiIF9uZ2hvc3Qtb3dpLWMyOT0iIiBuZy1yZWZsZWN0LXByaW1pdGl2ZXM9IiI+PHN2ZyBfbmdjb250ZW50LW93aS1jMjk9IiI+PGcgX25nY29udGVudC1vd2ktYzI5PSIiPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3QtbmctZm9yLW9mIjogIiIKfS0tPjxnIF9uZ2NvbnRlbnQtb3dpLWMyOT0iIiBuZy1yZWZsZWN0LW5nLXN3aXRjaD0iMyI+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1pZiI6ICJ0cnVlIgp9LS0+PGcgX25nY29udGVudC1vd2ktYzI5PSIiIHRyYW5zZm9ybT0ic2NhbGUoMSwxKSAiPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiOCIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNiIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNyIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMTAiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjQiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjEzIgp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICIzIgp9LS0+PGcgX25nY29udGVudC1vd2ktYzI5PSIiPjxwYXRoIF9uZ2NvbnRlbnQtb3dpLWMyOT0iIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00MC4xNjI1MDYxMDM1MTU2MjUgNTAgTDQwLjE2MjUwNjEwMzUxNTYyNSA1MCBMNDMuMTYyNTA2MTAzNTE1NjI1IDUwIEw0Ny4xNjI1MDYxMDM1MTU2MjUgNTAgTDYwLjE2MjUwNjEwMzUxNTYyNSA0OCBMNzIuMTYyNTA2MTAzNTE1NjIgNDggTDgwLjE2MjUwNjEwMzUxNTYyIDQ4IEw4OS4xNjI1MDYxMDM1MTU2MiA1MyBMOTcuMTYyNTA2MTAzNTE1NjIgNTkgTDEwNS4xNjI1MDYxMDM1MTU2MiA2NSBMMTEyLjE2MjUwNjEwMzUxNTYyIDcyIEwxMTUuMTYyNTA2MTAzNTE1NjIgNzYgTDExNy4xNjI1MDYxMDM1MTU2MiA4MSBMMTIwLjE2MjUwNjEwMzUxNTYyIDg4IEwxMjIuMTYyNTA2MTAzNTE1NjIgOTUgTDEyMi4xNjI1MDYxMDM1MTU2MiAxMDIgTDEyMi4xNjI1MDYxMDM1MTU2MiAxMTIgTDEyMS4xNjI1MDYxMDM1MTU2MiAxMjMgTDExNi4xNjI1MDYxMDM1MTU2MiAxMzYgTDExMC4xNjI1MDYxMDM1MTU2MiAxNDUgTDEwNS4xNjI1MDYxMDM1MTU2MiAxNTIgTDEwMi4xNjI1MDYxMDM1MTU2MiAxNTYgTDk1LjE2MjUwNjEwMzUxNTYyIDE2MyBMOTQuMTYyNTA2MTAzNTE1NjIgMTY2IEw5MC4xNjI1MDYxMDM1MTU2MiAxNjYgTDg0LjE2MjUwNjEwMzUxNTYyIDE2OCBMNzguMTYyNTA2MTAzNTE1NjIgMTcyIEw3MS4xNjI1MDYxMDM1MTU2MiAxNzUgTDY0LjE2MjUwNjEwMzUxNTYyIDE4MSBMNTguMTYyNTA2MTAzNTE1NjI1IDE5MiBMNTMuMTYyNTA2MTAzNTE1NjI1IDIwNiBMNTAuMTYyNTA2MTAzNTE1NjI1IDIyOCBMNDkuMTYyNTA2MTAzNTE1NjI1IDI0OSBMNTEuMTYyNTA2MTAzNTE1NjI1IDI2NyBMNTkuMTYyNTA2MTAzNTE1NjI1IDI4NSBMNjYuMTYyNTA2MTAzNTE1NjIgMzAwIEw3NC4xNjI1MDYxMDM1MTU2MiAzMTUgTDgyLjE2MjUwNjEwMzUxNTYyIDMyNyBMODkuMTYyNTA2MTAzNTE1NjIgMzM2IEw5NC4xNjI1MDYxMDM1MTU2MiAzNDQgTDEwMC4xNjI1MDYxMDM1MTU2MiAzNTMgTDEwNS4xNjI1MDYxMDM1MTU2MiAzNjAgTDEwOC4xNjI1MDYxMDM1MTU2MiAzNjQgTDEwOC4xNjI1MDYxMDM1MTU2MiAzNjggTDEwOC4xNjI1MDYxMDM1MTU2MiAzNzMgTDEwOC4xNjI1MDYxMDM1MTU2MiAzNzYgTDEwNC4xNjI1MDYxMDM1MTU2MiAzODAgTDk3LjE2MjUwNjEwMzUxNTYyIDM4NCBMODcuMTYyNTA2MTAzNTE1NjIgMzg3IEw4MC4xNjI1MDYxMDM1MTU2MiAzODcgTDcyLjE2MjUwNjEwMzUxNTYyIDM4NyBMNjMuMTYyNTA2MTAzNTE1NjI1IDM4NCBMNTYuMTYyNTA2MTAzNTE1NjI1IDM3OCBMNTEuMTYyNTA2MTAzNTE1NjI1IDM3MiBMNDUuMTYyNTA2MTAzNTE1NjI1IDM1OSBMNDQuMTYyNTA2MTAzNTE1NjI1IDM0OSBMNDQuMTYyNTA2MTAzNTE1NjI1IDMzOSBMNTIuMTYyNTA2MTAzNTE1NjI1IDMyNCBMNjEuMTYyNTA2MTAzNTE1NjI1IDMwOCBMNzIuMTYyNTA2MTAzNTE1NjIgMjkxIEw4NS4xNjI1MDYxMDM1MTU2MiAyNzMgTDk4LjE2MjUwNjEwMzUxNTYyIDI1NyBMMTA2LjE2MjUwNjEwMzUxNTYyIDI0MyBMMTExLjE2MjUwNjEwMzUxNTYyIDIzMSBMMTEyLjE2MjUwNjEwMzUxNTYyIDIyMSBMMTEyLjE2MjUwNjEwMzUxNTYyIDIxMiBMMTEyLjE2MjUwNjEwMzUxNTYyIDIwNCBMMTEyLjE2MjUwNjEwMzUxNTYyIDE5NyBMMTA3LjE2MjUwNjEwMzUxNTYyIDE4NyBMMTAwLjE2MjUwNjEwMzUxNTYyIDE3NSBMOTIuMTYyNTA2MTAzNTE1NjIgMTYzIEw4MC4xNjI1MDYxMDM1MTU2MiAxNDcgTDcyLjE2MjUwNjEwMzUxNTYyIDEzOSBMNjQuMTYyNTA2MTAzNTE1NjIgMTMwIEw1OC4xNjI1MDYxMDM1MTU2MjUgMTIzIEw1NS4xNjI1MDYxMDM1MTU2MjUgMTIwIEw1MC4xNjI1MDYxMDM1MTU2MjUgMTEzIEw0OS4xNjI1MDYxMDM1MTU2MjUgMTEyIEw0Ni4xNjI1MDYxMDM1MTU2MjUgMTA3IEw0NC4xNjI1MDYxMDM1MTU2MjUgMTA0IEw0My4xNjI1MDYxMDM1MTU2MjUgMTAxIEw0Mi4xNjI1MDYxMDM1MTU2MjUgOTggTDQwLjE2MjUwNjEwMzUxNTYyNSA5NSBMNDAuMTYyNTA2MTAzNTE1NjI1IDkyIEwzOS4xNjI1MDYxMDM1MTU2MjUgOTAgTDM4LjE2MjUwNjEwMzUxNTYyNSA4OCBMMzguMTYyNTA2MTAzNTE1NjI1IDg0IEwzNy4xNjI1MDYxMDM1MTU2MjUgNzkgTDM3LjE2MjUwNjEwMzUxNTYyNSA3NyBMMzcuMTYyNTA2MTAzNTE1NjI1IDc1IEwzNy4xNjI1MDYxMDM1MTU2MjUgNzMgTDM3LjE2MjUwNjEwMzUxNTYyNSA3MiBMMzcuMTYyNTA2MTAzNTE1NjI1IDY4IEw0MC4xNjI1MDYxMDM1MTU2MjUgNjUgTDQyLjE2MjUwNjEwMzUxNTYyNSA2MyBMNDQuMTYyNTA2MTAzNTE1NjI1IDYwIEw0NS4xNjI1MDYxMDM1MTU2MjUgNjAgTDQ2LjE2MjUwNjEwMzUxNTYyNSA1OSBMNDYuMTYyNTA2MTAzNTE1NjI1IDU4IEw0Ny4xNjI1MDYxMDM1MTU2MjUgNTggTDQ4LjE2MjUwNjEwMzUxNTYyNSA1NyBMNDguMTYyNTA2MTAzNTE1NjI1IDU2IEw0OC4xNjI1MDYxMDM1MTU2MjUgNTYgTDQ4LjE2MjUwNjEwMzUxNTYyNSA1NiBMNTAuMTYyNTA2MTAzNTE1NjI1IDU0IEw1MS4xNjI1MDYxMDM1MTU2MjUgNTMgTDUyLjE2MjUwNjEwMzUxNTYyNSA1MyBMNTIuMTYyNTA2MTAzNTE1NjI1IDUzIEw1My4xNjI1MDYxMDM1MTU2MjUgNTMgTDU0LjE2MjUwNjEwMzUxNTYyNSA1MyBMNTUuMTYyNTA2MTAzNTE1NjI1IDUzIEw1Ni4xNjI1MDYxMDM1MTU2MjUgNTIgTDU2LjE2MjUwNjEwMzUxNTYyNSA1MiBMNTcuMTYyNTA2MTAzNTE1NjI1IDUyIEw1OC4xNjI1MDYxMDM1MTU2MjUgNTIgTDU4LjE2MjUwNjEwMzUxNTYyNSA1MSBMNTguMTYyNTA2MTAzNTE1NjI1IDUwIEw2MC4xNjI1MDYxMDM1MTU2MjUgNDkgTDYwLjE2MjUwNjEwMzUxNTYyNSA0OSBMNjEuMTYyNTA2MTAzNTE1NjI1IDQ4IEw2Mi4xNjI1MDYxMDM1MTU2MjUgNDggTDYyLjE2MjUwNjEwMzUxNTYyNSA0OCIgc3Ryb2tlPSJyZ2JhKDAsMCwwLDEpIiBzdHJva2Utd2lkdGg9IjEiLz48L2c+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICI5Igp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICIxMSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMTIiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjIiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjIiCn0tLT48L2c+PC9nPjxnIF9uZ2NvbnRlbnQtb3dpLWMyOT0iIiBuZy1yZWZsZWN0LW5nLXN3aXRjaD0iMSI+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1pZiI6ICJ0cnVlIgp9LS0+PGcgX25nY29udGVudC1vd2ktYzI5PSIiIHRyYW5zZm9ybT0ic2NhbGUoMSwxKSAiPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiOCIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMSIKfS0tPjxyZWN0IF9uZ2NvbnRlbnQtb3dpLWMyOT0iIiB4PSI0OC4xNjI1MDYxMDM1MTU2MjUiIHk9IjQ1IiB3aWR0aD0iODAiIGhlaWdodD0iMjM5IiBmaWxsPSJyZ2JhKDAsMCwwLDEpIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsMSkiIHN0cm9rZS13aWR0aD0iNSIvPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNiIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNyIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMTAiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjQiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjEzIgp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICIzIgp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICI5Igp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICIxMSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMTIiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjIiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjIiCn0tLT48L2c+PC9nPjwvZz48L3N2Zz48L2c+PGcgX25nY29udGVudC1vd2ktYzU9IiIgYXBwLXN2Zz0iIiBfbmdob3N0LW93aS1jMjk9IiIgbmctcmVmbGVjdC1wcmltaXRpdmVzPSIiPjxzdmcgX25nY29udGVudC1vd2ktYzI5PSIiPjxnIF9uZ2NvbnRlbnQtb3dpLWMyOT0iIj48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLWZvci1vZiI6ICIiCn0tLT48L2c+PC9zdmc+PC9nPjwvc3ZnPg==';
        ctx.width = width;
        ctx.height = height;
        tool.setCanvasInfo(width, height, ctx);
        await tool['generateCanvas']();
        expect(tool['primitive']).toBeTruthy();
        expect(tool['command']).toBeTruthy();
        expect(tool['primitive'].fillingPoints.length).toBeGreaterThan(0);
        expect(tool['primitive'].contourPoints.length).toBeGreaterThan(0);
    });

    it('should destroy correctly', () => {
        tool.ngOnDestroy();
        expect(tool['canvasSubscription']).toBeFalsy();
    });

    // set infos
    it('Should set correctly set the infos', () => {
        const width = 200;
        const height = 400;
        const ctx = document.createElement('canvas');
        ctx.width = width;
        ctx.height = height;
        tool.setCanvasInfo(width, height, ctx);
        expect(tool.canvasWidth).toEqual(width);
        expect(tool.canvasHeight).toEqual(height);
        expect(tool.canvasReference).toEqual(ctx);
    });

    it('should load the image correctly', async () => {
        const img = new Image();
        // tslint:disable-next-line: max-line-length
        img.src = 'data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIF9uZ2NvbnRlbnQtb3dpLWM1PSIiIGNsYXNzPSJzdmdDb250YWluZXIiIHZpZXdCb3g9IjAgMCAyMDAgNDAwIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyIgd2lkdGg9IjIwMCIgaGVpZ2h0PSI0MDAiPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3QtbmctaWYiOiAiZmFsc2UiCn0tLT48ZyBfbmdjb250ZW50LW93aS1jNT0iIiBhcHAtc3ZnPSIiIF9uZ2hvc3Qtb3dpLWMyOT0iIiBuZy1yZWZsZWN0LXByaW1pdGl2ZXM9IiI+PHN2ZyBfbmdjb250ZW50LW93aS1jMjk9IiI+PGcgX25nY29udGVudC1vd2ktYzI5PSIiPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3QtbmctZm9yLW9mIjogIiIKfS0tPjxnIF9uZ2NvbnRlbnQtb3dpLWMyOT0iIiBuZy1yZWZsZWN0LW5nLXN3aXRjaD0iMyI+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1pZiI6ICJ0cnVlIgp9LS0+PGcgX25nY29udGVudC1vd2ktYzI5PSIiIHRyYW5zZm9ybT0ic2NhbGUoMSwxKSAiPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiOCIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNiIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNyIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMTAiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjQiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjEzIgp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICIzIgp9LS0+PGcgX25nY29udGVudC1vd2ktYzI5PSIiPjxwYXRoIF9uZ2NvbnRlbnQtb3dpLWMyOT0iIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00MC4xNjI1MDYxMDM1MTU2MjUgNTAgTDQwLjE2MjUwNjEwMzUxNTYyNSA1MCBMNDMuMTYyNTA2MTAzNTE1NjI1IDUwIEw0Ny4xNjI1MDYxMDM1MTU2MjUgNTAgTDYwLjE2MjUwNjEwMzUxNTYyNSA0OCBMNzIuMTYyNTA2MTAzNTE1NjIgNDggTDgwLjE2MjUwNjEwMzUxNTYyIDQ4IEw4OS4xNjI1MDYxMDM1MTU2MiA1MyBMOTcuMTYyNTA2MTAzNTE1NjIgNTkgTDEwNS4xNjI1MDYxMDM1MTU2MiA2NSBMMTEyLjE2MjUwNjEwMzUxNTYyIDcyIEwxMTUuMTYyNTA2MTAzNTE1NjIgNzYgTDExNy4xNjI1MDYxMDM1MTU2MiA4MSBMMTIwLjE2MjUwNjEwMzUxNTYyIDg4IEwxMjIuMTYyNTA2MTAzNTE1NjIgOTUgTDEyMi4xNjI1MDYxMDM1MTU2MiAxMDIgTDEyMi4xNjI1MDYxMDM1MTU2MiAxMTIgTDEyMS4xNjI1MDYxMDM1MTU2MiAxMjMgTDExNi4xNjI1MDYxMDM1MTU2MiAxMzYgTDExMC4xNjI1MDYxMDM1MTU2MiAxNDUgTDEwNS4xNjI1MDYxMDM1MTU2MiAxNTIgTDEwMi4xNjI1MDYxMDM1MTU2MiAxNTYgTDk1LjE2MjUwNjEwMzUxNTYyIDE2MyBMOTQuMTYyNTA2MTAzNTE1NjIgMTY2IEw5MC4xNjI1MDYxMDM1MTU2MiAxNjYgTDg0LjE2MjUwNjEwMzUxNTYyIDE2OCBMNzguMTYyNTA2MTAzNTE1NjIgMTcyIEw3MS4xNjI1MDYxMDM1MTU2MiAxNzUgTDY0LjE2MjUwNjEwMzUxNTYyIDE4MSBMNTguMTYyNTA2MTAzNTE1NjI1IDE5MiBMNTMuMTYyNTA2MTAzNTE1NjI1IDIwNiBMNTAuMTYyNTA2MTAzNTE1NjI1IDIyOCBMNDkuMTYyNTA2MTAzNTE1NjI1IDI0OSBMNTEuMTYyNTA2MTAzNTE1NjI1IDI2NyBMNTkuMTYyNTA2MTAzNTE1NjI1IDI4NSBMNjYuMTYyNTA2MTAzNTE1NjIgMzAwIEw3NC4xNjI1MDYxMDM1MTU2MiAzMTUgTDgyLjE2MjUwNjEwMzUxNTYyIDMyNyBMODkuMTYyNTA2MTAzNTE1NjIgMzM2IEw5NC4xNjI1MDYxMDM1MTU2MiAzNDQgTDEwMC4xNjI1MDYxMDM1MTU2MiAzNTMgTDEwNS4xNjI1MDYxMDM1MTU2MiAzNjAgTDEwOC4xNjI1MDYxMDM1MTU2MiAzNjQgTDEwOC4xNjI1MDYxMDM1MTU2MiAzNjggTDEwOC4xNjI1MDYxMDM1MTU2MiAzNzMgTDEwOC4xNjI1MDYxMDM1MTU2MiAzNzYgTDEwNC4xNjI1MDYxMDM1MTU2MiAzODAgTDk3LjE2MjUwNjEwMzUxNTYyIDM4NCBMODcuMTYyNTA2MTAzNTE1NjIgMzg3IEw4MC4xNjI1MDYxMDM1MTU2MiAzODcgTDcyLjE2MjUwNjEwMzUxNTYyIDM4NyBMNjMuMTYyNTA2MTAzNTE1NjI1IDM4NCBMNTYuMTYyNTA2MTAzNTE1NjI1IDM3OCBMNTEuMTYyNTA2MTAzNTE1NjI1IDM3MiBMNDUuMTYyNTA2MTAzNTE1NjI1IDM1OSBMNDQuMTYyNTA2MTAzNTE1NjI1IDM0OSBMNDQuMTYyNTA2MTAzNTE1NjI1IDMzOSBMNTIuMTYyNTA2MTAzNTE1NjI1IDMyNCBMNjEuMTYyNTA2MTAzNTE1NjI1IDMwOCBMNzIuMTYyNTA2MTAzNTE1NjIgMjkxIEw4NS4xNjI1MDYxMDM1MTU2MiAyNzMgTDk4LjE2MjUwNjEwMzUxNTYyIDI1NyBMMTA2LjE2MjUwNjEwMzUxNTYyIDI0MyBMMTExLjE2MjUwNjEwMzUxNTYyIDIzMSBMMTEyLjE2MjUwNjEwMzUxNTYyIDIyMSBMMTEyLjE2MjUwNjEwMzUxNTYyIDIxMiBMMTEyLjE2MjUwNjEwMzUxNTYyIDIwNCBMMTEyLjE2MjUwNjEwMzUxNTYyIDE5NyBMMTA3LjE2MjUwNjEwMzUxNTYyIDE4NyBMMTAwLjE2MjUwNjEwMzUxNTYyIDE3NSBMOTIuMTYyNTA2MTAzNTE1NjIgMTYzIEw4MC4xNjI1MDYxMDM1MTU2MiAxNDcgTDcyLjE2MjUwNjEwMzUxNTYyIDEzOSBMNjQuMTYyNTA2MTAzNTE1NjIgMTMwIEw1OC4xNjI1MDYxMDM1MTU2MjUgMTIzIEw1NS4xNjI1MDYxMDM1MTU2MjUgMTIwIEw1MC4xNjI1MDYxMDM1MTU2MjUgMTEzIEw0OS4xNjI1MDYxMDM1MTU2MjUgMTEyIEw0Ni4xNjI1MDYxMDM1MTU2MjUgMTA3IEw0NC4xNjI1MDYxMDM1MTU2MjUgMTA0IEw0My4xNjI1MDYxMDM1MTU2MjUgMTAxIEw0Mi4xNjI1MDYxMDM1MTU2MjUgOTggTDQwLjE2MjUwNjEwMzUxNTYyNSA5NSBMNDAuMTYyNTA2MTAzNTE1NjI1IDkyIEwzOS4xNjI1MDYxMDM1MTU2MjUgOTAgTDM4LjE2MjUwNjEwMzUxNTYyNSA4OCBMMzguMTYyNTA2MTAzNTE1NjI1IDg0IEwzNy4xNjI1MDYxMDM1MTU2MjUgNzkgTDM3LjE2MjUwNjEwMzUxNTYyNSA3NyBMMzcuMTYyNTA2MTAzNTE1NjI1IDc1IEwzNy4xNjI1MDYxMDM1MTU2MjUgNzMgTDM3LjE2MjUwNjEwMzUxNTYyNSA3MiBMMzcuMTYyNTA2MTAzNTE1NjI1IDY4IEw0MC4xNjI1MDYxMDM1MTU2MjUgNjUgTDQyLjE2MjUwNjEwMzUxNTYyNSA2MyBMNDQuMTYyNTA2MTAzNTE1NjI1IDYwIEw0NS4xNjI1MDYxMDM1MTU2MjUgNjAgTDQ2LjE2MjUwNjEwMzUxNTYyNSA1OSBMNDYuMTYyNTA2MTAzNTE1NjI1IDU4IEw0Ny4xNjI1MDYxMDM1MTU2MjUgNTggTDQ4LjE2MjUwNjEwMzUxNTYyNSA1NyBMNDguMTYyNTA2MTAzNTE1NjI1IDU2IEw0OC4xNjI1MDYxMDM1MTU2MjUgNTYgTDQ4LjE2MjUwNjEwMzUxNTYyNSA1NiBMNTAuMTYyNTA2MTAzNTE1NjI1IDU0IEw1MS4xNjI1MDYxMDM1MTU2MjUgNTMgTDUyLjE2MjUwNjEwMzUxNTYyNSA1MyBMNTIuMTYyNTA2MTAzNTE1NjI1IDUzIEw1My4xNjI1MDYxMDM1MTU2MjUgNTMgTDU0LjE2MjUwNjEwMzUxNTYyNSA1MyBMNTUuMTYyNTA2MTAzNTE1NjI1IDUzIEw1Ni4xNjI1MDYxMDM1MTU2MjUgNTIgTDU2LjE2MjUwNjEwMzUxNTYyNSA1MiBMNTcuMTYyNTA2MTAzNTE1NjI1IDUyIEw1OC4xNjI1MDYxMDM1MTU2MjUgNTIgTDU4LjE2MjUwNjEwMzUxNTYyNSA1MSBMNTguMTYyNTA2MTAzNTE1NjI1IDUwIEw2MC4xNjI1MDYxMDM1MTU2MjUgNDkgTDYwLjE2MjUwNjEwMzUxNTYyNSA0OSBMNjEuMTYyNTA2MTAzNTE1NjI1IDQ4IEw2Mi4xNjI1MDYxMDM1MTU2MjUgNDggTDYyLjE2MjUwNjEwMzUxNTYyNSA0OCIgc3Ryb2tlPSJyZ2JhKDAsMCwwLDEpIiBzdHJva2Utd2lkdGg9IjEiLz48L2c+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICI5Igp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICIxMSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMTIiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjIiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjIiCn0tLT48L2c+PC9nPjxnIF9uZ2NvbnRlbnQtb3dpLWMyOT0iIiBuZy1yZWZsZWN0LW5nLXN3aXRjaD0iMSI+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1pZiI6ICJ0cnVlIgp9LS0+PGcgX25nY29udGVudC1vd2ktYzI5PSIiIHRyYW5zZm9ybT0ic2NhbGUoMSwxKSAiPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiOCIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMSIKfS0tPjxyZWN0IF9uZ2NvbnRlbnQtb3dpLWMyOT0iIiB4PSI0OC4xNjI1MDYxMDM1MTU2MjUiIHk9IjQ1IiB3aWR0aD0iODAiIGhlaWdodD0iMjM5IiBmaWxsPSJyZ2JhKDAsMCwwLDEpIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsMSkiIHN0cm9rZS13aWR0aD0iNSIvPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNiIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiNyIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMTAiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjQiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjEzIgp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICIzIgp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICI5Igp9LS0+PCEtLWJpbmRpbmdzPXsKICAibmctcmVmbGVjdC1uZy1zd2l0Y2gtY2FzZSI6ICIxMSIKfS0tPjwhLS1iaW5kaW5ncz17CiAgIm5nLXJlZmxlY3Qtbmctc3dpdGNoLWNhc2UiOiAiMTIiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjIiCn0tLT48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLXN3aXRjaC1jYXNlIjogIjIiCn0tLT48L2c+PC9nPjwvZz48L3N2Zz48L2c+PGcgX25nY29udGVudC1vd2ktYzU9IiIgYXBwLXN2Zz0iIiBfbmdob3N0LW93aS1jMjk9IiIgbmctcmVmbGVjdC1wcmltaXRpdmVzPSIiPjxzdmcgX25nY29udGVudC1vd2ktYzI5PSIiPjxnIF9uZ2NvbnRlbnQtb3dpLWMyOT0iIj48IS0tYmluZGluZ3M9ewogICJuZy1yZWZsZWN0LW5nLWZvci1vZiI6ICIiCn0tLT48L2c+PC9zdmc+PC9nPjwvc3ZnPg==';

        const imageLoaded = await tool['loadImage'](img);
        expect(imageLoaded).toBe(true);
    });
});
